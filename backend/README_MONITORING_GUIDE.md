# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ GameTicker –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–≥—Ä–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –û–Ω–∞ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–ª—è—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞, –ø–æ–ª—É—á–∞—Ç—å –∞–ª–µ—Ä—Ç—ã –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```go
// 1. –°–æ–∑–¥–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ç–∏–∫–µ—Ä
gameTicker := NewGameTicker(30, logger) // 30 TPS

// 2. –°–æ–∑–¥–∞–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
monitor := NewMonitoringManager(gameTicker)

// 3. –ó–∞–ø—É—Å–∫–∞–µ–º HTTP API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
monitor.SetupHTTPMonitoring(9090)

// 4. –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
monitor.StartContinuousMonitoring(2 * time.Second)

// 5. –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
gameTicker.Start()
```

### –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

```bash
# –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
cd backend && go run *.go -monitor

# –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
# http://localhost:9090/health
# http://localhost:9090/stats  
# http://localhost:9090/bottlenecks
# http://localhost:9090/alerts
```

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**
- üîÑ **TPS (Ticks Per Second)**: –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è vs —Ü–µ–ª–µ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞
- ‚è±Ô∏è **–í—Ä–µ–º—è —Ç–∏–∫–∞**: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Ç–∏–∫–∞
- ‚ö†Ô∏è **–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Ç–∏–∫–∏**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É—Å–ø–µ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –≤–æ–≤—Ä–µ–º—è
- üéÆ **–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º**: –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π –∏–≥—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```go
health := monitor.CheckServerHealth()
status := health["status"].(string)

switch status {
case "healthy":
    log.Println("‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ")
case "warning":  
    log.Println("‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è")
case "degraded":
    log.Println("üî¥ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–Ω–∏–∂–µ–Ω–∞")
case "critical":
    log.Println("üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã!")
}
```

### 2. –ê–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ:**
- üêå –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- üìà –ü—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–∏–∫–∞, –∑–∞–Ω–∏–º–∞–µ–º—ã–π –∫–∞–∂–¥–æ–π —Å–∏—Å—Ç–µ–º–æ–π  
- üéØ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –ø–æ—Ä–æ–≥–∏

**–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:**
```go
bottlenecks := monitor.FindBottlenecks()

for _, bottleneck := range bottlenecks {
    fmt.Printf("üîç –°–∏—Å—Ç–µ–º–∞: %s\n", bottleneck.System)
    fmt.Printf("   –°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å: %s\n", bottleneck.Severity)
    fmt.Printf("   –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è: %v (%.1f%% —Ç–∏–∫–∞)\n", 
        bottleneck.AverageTime, bottleneck.PercentOfTick)
    fmt.Printf("   üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: %s\n", bottleneck.Recommendation)
}
```

### 3. –°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–¢–∏–ø—ã –∞–ª–µ—Ä—Ç–æ–≤:**
- ‚ö†Ô∏è **Warning**: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ 25% –≤—Ä–µ–º–µ–Ω–∏ —Ç–∏–∫–∞
- üö® **Critical**: –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ 50% –≤—Ä–µ–º–µ–Ω–∏ —Ç–∏–∫–∞  
- üî¥ **Server Issues**: –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–µ—Ä–≤–µ—Ä–∞

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
```go
// –ó–∞–ø—É—Å–∫ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
monitor.StartContinuousMonitoring(2 * time.Second)

// –ê–ª–µ—Ä—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
// [MONITOR] –ê–õ–ï–†–¢ [critical]: –°–∏—Å—Ç–µ–º–∞ CollisionSystem —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ
// [MONITOR] –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–õ–ï–†–¢: –°–∏—Å—Ç–µ–º–∞ CollisionSystem –∑–∞–Ω–∏–º–∞–µ—Ç 67.3% –≤—Ä–µ–º–µ–Ω–∏ —Ç–∏–∫–∞
```

## üåê HTTP API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/health` | GET | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ |
| `/stats` | GET | –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞ |
| `/bottlenecks` | GET | –ê–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç |
| `/alerts` | GET | –ò—Å—Ç–æ—Ä–∏—è –∞–ª–µ—Ä—Ç–æ–≤ |
| `/control?action=X` | POST | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º |

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:9090/health

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
curl http://localhost:9090/stats | jq

# –ê–Ω–∞–ª–∏–∑ —É–∑–∫–∏—Ö –º–µ—Å—Ç  
curl http://localhost:9090/bottlenecks | jq

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–ª–µ—Ä—Ç–æ–≤
curl http://localhost:9090/alerts | jq

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º
curl -X POST "http://localhost:9090/control?action=pause"
curl -X POST "http://localhost:9090/control?action=resume"  
curl -X POST "http://localhost:9090/control?action=stats"
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ `/health`:

```json
{
  "status": "warning",
  "issues": [
    "–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–∏–∫–∏: 15.2ms (–Ω–æ—Ä–º–∞: <16.6ms)"
  ],
  "stats": {
    "actual_tps": 28.4,
    "target_tps": 30,
    "tick_count": 1247,
    "average_tick_time": "15.2ms"
  }
}
```

## üìà –≠–∫—Å–ø–æ—Ä—Ç –º–µ—Ç—Ä–∏–∫

### –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Prometheus/Grafana

```go
metrics := monitor.ExportMetrics()

// –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
// game_tps_actual - —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π TPS
// game_tps_target - —Ü–µ–ª–µ–≤–æ–π TPS  
// game_tick_count - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ç–∏–∫–æ–≤
// game_average_tick_time_ms - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ç–∏–∫–∞
// system_CollisionSystem_avg_time_ms - —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–ª–ª–∏–∑–∏–π
```

### –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Prometheus

```go
// –°–æ–∑–¥–∞–µ–º Prometheus –º–µ—Ç—Ä–∏–∫–∏
var (
    tpsGauge = prometheus.NewGaugeVec(
        prometheus.GaugeOpts{
            Name: "game_tps_actual",
            Help: "Actual TPS of the game server",
        },
        []string{"server"},
    )
)

// –û–±–Ω–æ–≤–ª—è–µ–º –º–µ—Ç—Ä–∏–∫–∏
func updatePrometheusMetrics(monitor *MonitoringManager) {
    metrics := monitor.ExportMetrics()
    tpsGauge.WithLabelValues("main").Set(metrics["game_tps_actual"])
}
```

## ‚ö° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production

```go
// –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–¥–∞–∫—à–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
func SetupProductionMonitoring(gameTicker *GameTicker) {
    monitor := NewMonitoringManager(gameTicker)
    
    // HTTP API –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
    monitor.SetupHTTPMonitoring(9090)
    
    // –ß–∞—Å—Ç—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥)
    monitor.StartContinuousMonitoring(5 * time.Second)
    
    // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–µ–π —Å–∏—Å—Ç–µ–º–æ–π –∞–ª–µ—Ä—Ç–æ–≤
    go func() {
        ticker := time.NewTicker(30 * time.Second)
        for range ticker.C {
            health := monitor.CheckServerHealth()
            if health["status"] != "healthy" {
                sendToSlack("üö® Game Server Alert", health)
            }
        }
    }()
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```go
// –í—Ä–µ–º–µ–Ω–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
func DebugPerformance(gameTicker *GameTicker) {
    monitor := NewMonitoringManager(gameTicker)
    
    // –û—á–µ–Ω—å —á–∞—Å—Ç—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    monitor.StartContinuousMonitoring(500 * time.Millisecond)
    
    // –ß–µ—Ä–µ–∑ 1 –º–∏–Ω—É—Ç—É –≤—ã–≤–æ–¥–∏–º –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
    time.AfterFunc(1*time.Minute, func() {
        bottlenecks := monitor.FindBottlenecks()
        
        fmt.Println("=== –ê–ù–ê–õ–ò–ó –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò ===")
        for _, b := range bottlenecks {
            fmt.Printf("–°–∏—Å—Ç–µ–º–∞ %s: %v (%.1f%% —Ç–∏–∫–∞)\n", 
                b.System, b.AverageTime, b.PercentOfTick)
            fmt.Printf("–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: %s\n\n", b.Recommendation)
        }
    })
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

```go
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è TPS –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫—É
func AutoScaleTPS(gameTicker *GameTicker) {
    monitor := NewMonitoringManager(gameTicker)
    
    go func() {
        ticker := time.NewTicker(10 * time.Second)
        for range ticker.C {
            stats := gameTicker.GetStats()
            avgTickTime := stats["average_tick_time"].(time.Duration)
            targetTPS := stats["target_tps"].(int)
            
            targetTickTime := time.Second / time.Duration(targetTPS)
            
            // –ï—Å–ª–∏ —Ç–∏–∫–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–µ - —Å–Ω–∏–∂–∞–µ–º TPS
            if avgTickTime > targetTickTime*3/4 {
                newTPS := int(float64(targetTPS) * 0.9)
                log.Printf("–°–Ω–∏–∂–∞–µ–º TPS: %d -> %d", targetTPS, newTPS)
                // –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —Ç–∏–∫–µ—Ä —Å –Ω–æ–≤—ã–º TPS
            }
            
            // –ï—Å–ª–∏ —Ç–∏–∫–∏ –±—ã—Å—Ç—Ä—ã–µ - –º–æ–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å TPS  
            if avgTickTime < targetTickTime/2 {
                newTPS := int(float64(targetTPS) * 1.1)
                log.Printf("–ü–æ–≤—ã—à–∞–µ–º TPS: %d -> %d", targetTPS, newTPS)
            }
        }
    }()
}
```

## üéõÔ∏è –ü–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–æ–≤ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

```go
// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ GameTicker
ticker := NewGameTicker(30, logger)

// –ü–æ—Ä–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è:
// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: > 25% –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–∏–∫–∞ (8.33ms –¥–ª—è 30 TPS)
// –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ: > 50% –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–∏–∫–∞ (16.67ms –¥–ª—è 30 TPS)  
// –ú–∞–∫—Å–∏–º—É–º —Ç–∏–∫–∞: > 200% –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–∏–∫–∞ (66.67ms –¥–ª—è 30 TPS)
```

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —Ç–∏–ø—É –∏–≥—Ä—ã

| –¢–∏–ø –∏–≥—Ä—ã | TPS | –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ |
|----------|-----|---------------------|-------------------|
| –°—Ç—Ä–∞—Ç–µ–≥–∏—è | 10-15 | 10 —Å–µ–∫ | > 50ms |
| MMO | 20-30 | 5 —Å–µ–∫ | > 25ms |
| –®—É—Ç–µ—Ä | 60-128 | 1 —Å–µ–∫ | > 8ms |
| Agar.io | 20-40 | 2 —Å–µ–∫ | > 20ms |

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü–æ —Å–∏—Å—Ç–µ–º–∞–º

**CollisionSystem:**
- ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä —è—á–µ–µ–∫ spatial grid
- ‚úÖ –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å broadphase/narrowphase —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞

**FoodRespawnSystem:**
- ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª —Ä–µ—Å–ø–∞–≤–Ω–∞
- ‚úÖ –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–π –µ–¥—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É–ª–∏–Ω–≥ –æ–±—ä–µ–∫—Ç–æ–≤

**NetworkSyncSystem:**
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é
- ‚úÖ –°–Ω–∏–∑–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å delta compression
- ‚úÖ –ë–∞—Ç—á–∏–Ω–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `go tool pprof` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö—ç—à–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–æ –≤—ã—á–∏—Å–ª—è–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
3. **–ü—É–ª–∏–Ω–≥**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sync.Pool –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤
4. **–ë–∞—Ç—á–∏–Ω–≥**: –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
5. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –í—ã–Ω–æ—Å–∏—Ç–µ —Ç—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≥–æ—Ä—É—Ç–∏–Ω—ã

## üõ°Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

```go
// –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ Slack
func sendSlackAlert(monitor *MonitoringManager) {
    bottlenecks := monitor.FindBottlenecks()
    
    for _, b := range bottlenecks {
        if b.Severity == "critical" {
            message := fmt.Sprintf("üö® Critical Performance Issue\n"+
                "System: %s\n"+
                "Time: %v (%.1f%% of tick)\n"+
                "Recommendation: %s",
                b.System, b.AverageTime, b.PercentOfTick, b.Recommendation)
                
            sendToSlack(message)
        }
    }
}

// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
func setupLogging(monitor *MonitoringManager) {
    go func() {
        ticker := time.NewTicker(1 * time.Minute)
        for range ticker.C {
            metrics := monitor.ExportMetrics()
            
            // –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
            log.Printf("METRICS: tps=%.1f tick_time=%.1fms systems=%d",
                metrics["game_tps_actual"],
                metrics["game_average_tick_time_ms"], 
                int(metrics["game_systems_count"]))
        }
    }()
}
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è production

- ‚úÖ HTTP –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
- ‚úÖ –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å –ø–æ–¥—Ö–æ–¥—è—â–∏–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
- ‚úÖ –ê–ª–µ—Ä—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å —Å–∏—Å—Ç–µ–º–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ –ü–æ—Ä–æ–≥–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏–∫—É –∏–≥—Ä—ã
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production –∏ –ø–æ–º–æ–∂–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –∏–≥—Ä–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞! üöÄ 