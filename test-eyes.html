<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –°–∏—Å—Ç–µ–º—ã –ì–ª–∞–∑</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #000;
            font-family: Arial, sans-serif;
        }
        
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 8px;
            z-index: 1000;
        }
        
        #controls {
            position: absolute;
            top: 10px;
            right: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 8px;
            z-index: 1000;
        }
        
        button {
            display: block;
            margin: 5px 0;
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .normal { background: #4CAF50; color: white; }
        .happy { background: #FFD700; color: black; }
        .angry { background: #FF4444; color: white; }
        .scared { background: #9C27B0; color: white; }
        .left { background: #2196F3; color: white; }
        .right { background: #FF9800; color: white; }
    </style>
</head>
<body>
    <div id="info">
        <h3>üß™ –¢–µ—Å—Ç –°–∏—Å—Ç–µ–º—ã –ì–ª–∞–∑</h3>
        <p>–°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–∫—Å—Ç—É—Ä—ã: <span id="texture-status">–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</span></p>
        <p>–ì–ª–∞–∑–∞ —Å–æ–∑–¥–∞–Ω—ã: <span id="eyes-status">–ù–µ—Ç</span></p>
        <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ —Å–ø—Ä–∞–≤–∞ –¥–ª—è —Å–º–µ–Ω—ã —ç–º–æ—Ü–∏–π</p>
    </div>
    
    <div id="controls">
        <h4>üëÄ –≠–º–æ—Ü–∏–∏</h4>
        <button class="normal" onclick="setEmotion('normal')">–û–±—ã—á–Ω–æ–µ</button>
        <button class="happy" onclick="setEmotion('happy')">–†–∞–¥–æ—Å—Ç—å</button>
        <button class="angry" onclick="setEmotion('angry')">–ì–Ω–µ–≤</button>
        <button class="scared" onclick="setEmotion('scared')">–°—Ç—Ä–∞—Ö</button>
        <button class="left" onclick="setEmotion('looking_left')">–í–ª–µ–≤–æ</button>
        <button class="right" onclick="setEmotion('looking_right')">–í–ø—Ä–∞–≤–æ</button>
        <hr>
        <button onclick="recreateEyes()" style="background: #607D8B; color: white;">üîÑ –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≥–ª–∞–∑–∞</button>
    </div>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let scene, camera, renderer;
        let sphere, eyeSystem;
        
        // –°–∏—Å—Ç–µ–º–∞ –≥–ª–∞–∑ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        class EyeSystem {
            constructor() {
                this.eyeTexture = null;
                this.leftEye = null;
                this.rightEye = null;
                this.sphereMesh = null;
                
                // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≥–ª–∞–∑ - –µ—â–µ –ë–û–õ–¨–®–ï –∏ –±–ª–∏–∂–µ!
                this.eyeSize = 1.44; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –Ω–∞ 20% (1.2 * 1.2)
                this.eyeDistance = 1.0; // –ë–ª–∏–∂–µ –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É
                this.eyeOffset = 0.9;
                
                // –ö–∞—Ä—Ç–∞ —ç–º–æ—Ü–∏–π
                this.emotions = {
                    'normal': { u: 0, v: 0 },      
                    'happy': { u: 0.166, v: 0 },    // 1/6
                    'angry': { u: 0.333, v: 0 },    // 2/6
                    'scared': { u: 0.5, v: 0 },     // 3/6
                    'looking_left': { u: 0.666, v: 0 },  // 4/6
                    'looking_right': { u: 0.833, v: 0 }  // 5/6
                };
                
                this.currentEmotion = 'normal';
            }
            
            async loadTexture() {
                console.log('–ù–∞—á–∏–Ω–∞—é –∑–∞–≥—Ä—É–∑–∫—É —Ç–µ–∫—Å—Ç—É—Ä—ã eyes.png...');
                // –í—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback
                console.log('–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–µ–º fallback —Ç–µ–∫—Å—Ç—É—Ä—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è');
                this.createFallbackTexture();
                document.getElementById('texture-status').textContent = 'Fallback —Å–æ–∑–¥–∞–Ω ‚ö†Ô∏è';
                return true;
                
                /* –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞
                try {
                    const loader = new THREE.TextureLoader();
                    this.eyeTexture = await new Promise((resolve, reject) => {
                        loader.load(
                            './eyes.png',
                            (texture) => {
                                console.log('–¢–µ–∫—Å—Ç—É—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:', texture);
                                console.log('–†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç—É—Ä—ã:', texture.image.width, 'x', texture.image.height);
                                resolve(texture);
                            },
                            (progress) => {
                                console.log('–ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏:', progress);
                            },
                            (error) => {
                                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–∫—Å—Ç—É—Ä—ã:', error);
                                reject(error);
                            }
                        );
                    });
                    
                    this.eyeTexture.magFilter = THREE.NearestFilter;
                    this.eyeTexture.minFilter = THREE.NearestFilter;
                    this.eyeTexture.wrapS = THREE.ClampToEdgeWrapping;
                    this.eyeTexture.wrapT = THREE.ClampToEdgeWrapping;
                    
                    document.getElementById('texture-status').textContent = '–ó–∞–≥—Ä—É–∂–µ–Ω–∞ ‚úÖ';
                    console.log('–¢–µ–∫—Å—Ç—É—Ä–∞ –≥–ª–∞–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é');
                    return true;
                } catch (error) {
                    document.getElementById('texture-status').textContent = '–û—à–∏–±–∫–∞ ‚ùå';
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–∫—Å—Ç—É—Ä—ã –≥–ª–∞–∑:', error);
                    
                    // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Å—Ç—É—é —Ç–µ–∫—Å—Ç—É—Ä—É –∫–∞–∫ fallback
                    this.createFallbackTexture();
                    return false;
                }
                */
            }
            
            createFallbackTexture() {
                // –°–æ–∑–¥–∞–µ–º –±–æ–ª—å—à–∏–µ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—ã–µ –≥–ª–∞–∑–∞ –∫–∞–∫ —É —á–µ—Ä–≤—è—á–∫–æ–≤ –≤ Worms!
                const canvas = document.createElement('canvas');
                canvas.width = 600; // 6 —ç–º–æ—Ü–∏–π –ø–æ 100px
                canvas.height = 100;
                const ctx = canvas.getContext('2d');
                
                // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // –°–æ–∑–¥–∞–µ–º –ë–û–õ–¨–®–ò–ï –≥–ª–∞–∑–∞ –¥–ª—è –∫–∞–∂–¥–æ–π —ç–º–æ—Ü–∏–∏
                const emotions = [
                    { name: 'normal', pupilX: 50, pupilY: 50, pupilSize: 25 },
                    { name: 'happy', pupilX: 50, pupilY: 60, pupilSize: 30, eyeHeight: 50 }, // –ü—Ä–∏—â—É—Ä–µ–Ω–Ω—ã–µ —Å—á–∞—Å—Ç–ª–∏–≤—ã–µ
                    { name: 'angry', pupilX: 50, pupilY: 35, pupilSize: 35, eyeColor: '#FFE6E6' }, // –ù–∞–ª–∏—Ç—ã–µ –∫—Ä–æ–≤—å—é
                    { name: 'scared', pupilX: 50, pupilY: 30, pupilSize: 40, eyeColor: '#E6F3FF' }, // –®–∏—Ä–æ–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ
                    { name: 'left', pupilX: 30, pupilY: 50, pupilSize: 25 },
                    { name: 'right', pupilX: 70, pupilY: 50, pupilSize: 25 } // –î–æ–±–∞–≤–ª—è–µ–º "–≤–ø—Ä–∞–≤–æ"
                ];
                
                emotions.forEach((emotion, index) => {
                    const x = index * 100;
                    
                    // –ë–µ–ª–æ–∫ –≥–ª–∞–∑–∞ (–±–æ–ª—å—à–æ–π!)
                    ctx.fillStyle = emotion.eyeColor || '#FFFFFF';
                    const eyeHeight = emotion.eyeHeight || 70;
                    ctx.beginPath();
                    ctx.ellipse(x + 50, 50, 35, eyeHeight / 2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // –ß–µ—Ä–Ω–∞—è –æ–±–≤–æ–¥–∫–∞
                    ctx.strokeStyle = '#000000';
                    ctx.lineWidth = 3;
                    ctx.stroke();
                    
                    // –ë–û–õ–¨–®–û–ô –∑—Ä–∞—á–æ–∫
                    ctx.fillStyle = '#000000';
                    ctx.beginPath();
                    ctx.ellipse(x + emotion.pupilX, emotion.pupilY, emotion.pupilSize / 2, emotion.pupilSize / 2, 0, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // –ë–ª–∏–∫ –≤ –≥–ª–∞–∑—É –¥–ª—è –∂–∏–≤–æ—Å—Ç–∏
                    ctx.fillStyle = '#FFFFFF';
                    ctx.beginPath();
                    ctx.ellipse(x + emotion.pupilX - 8, emotion.pupilY - 8, 6, 6, 0, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                this.eyeTexture = new THREE.CanvasTexture(canvas);
                this.eyeTexture.magFilter = THREE.NearestFilter;
                this.eyeTexture.minFilter = THREE.NearestFilter;
                
                console.log('–°–æ–∑–¥–∞–Ω–∞ fallback —Ç–µ–∫—Å—Ç—É—Ä–∞ —Å –ë–û–õ–¨–®–ò–ú–ò –≥–ª–∞–∑–∞–º–∏ —Ä–∞–∑–º–µ—Ä–æ–º:', canvas.width, 'x', canvas.height);
            }
            
            createEyes(sphereMesh) {
                console.log('–°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–∑... –¢–µ–∫—Å—Ç—É—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞:', !!this.eyeTexture);
                if (!this.eyeTexture) {
                    console.warn('–¢–µ–∫—Å—Ç—É—Ä–∞ –≥–ª–∞–∑ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
                    return false;
                }
                
                this.sphereMesh = sphereMesh;
                const radius = sphereMesh.geometry.parameters.radius;
                console.log('–†–∞–¥–∏—É—Å —Å—Ñ–µ—Ä—ã:', radius);
                
                // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –≥–ª–∞–∑–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
                this.removeEyes();
                
                // –°–æ–∑–¥–∞–µ–º –ü–õ–û–°–ö–£–Æ –≥–µ–æ–º–µ—Ç—Ä–∏—é –¥–ª—è –≥–ª–∞–∑ - –Ω–æ –ë–û–õ–¨–®–£–Æ!
                const eyeGeometry = new THREE.PlaneGeometry(this.eyeSize, this.eyeSize);
                console.log('–ì–µ–æ–º–µ—Ç—Ä–∏—è –≥–ª–∞–∑ —Å–æ–∑–¥–∞–Ω–∞, —Ä–∞–∑–º–µ—Ä:', this.eyeSize);
                
                // –°–æ–∑–¥–∞–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª —Å —Ç–µ–∫—Å—Ç—É—Ä–æ–π
                const eyeMaterial = new THREE.MeshBasicMaterial({
                    map: this.eyeTexture.clone(),
                    transparent: true,
                    alphaTest: 0.1,
                    side: THREE.DoubleSide
                });
                console.log('–ú–∞—Ç–µ—Ä–∏–∞–ª –≥–ª–∞–∑ —Å–æ–∑–¥–∞–Ω:', eyeMaterial);
                console.log('–¢–µ–∫—Å—Ç—É—Ä–∞ –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–µ:', eyeMaterial.map);
                
                // –õ–µ–≤—ã–π –≥–ª–∞–∑ - –ë–û–õ–¨–®–û–ô –∏ –ø–ª–æ—Å–∫–∏–π!
                this.leftEye = new THREE.Mesh(eyeGeometry, eyeMaterial.clone());
                this.leftEye.position.set(-this.eyeDistance / 2, 0.8, radius + 0.1);
                console.log('–õ–µ–≤—ã–π –≥–ª–∞–∑ —Å–æ–∑–¥–∞–Ω, –ø–æ–∑–∏—Ü–∏—è:', this.leftEye.position);
                
                // –ü—Ä–∞–≤—ã–π –≥–ª–∞–∑ - –ë–û–õ–¨–®–û–ô –∏ –ø–ª–æ—Å–∫–∏–π!
                this.rightEye = new THREE.Mesh(eyeGeometry, eyeMaterial.clone());
                this.rightEye.position.set(this.eyeDistance / 2, 0.8, radius + 0.1);
                console.log('–ü—Ä–∞–≤—ã–π –≥–ª–∞–∑ —Å–æ–∑–¥–∞–Ω, –ø–æ–∑–∏—Ü–∏—è:', this.rightEye.position);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–∞–∑–∞ –∫ —Å—Ñ–µ—Ä–µ
                sphereMesh.add(this.leftEye);
                sphereMesh.add(this.rightEye);
                console.log('–ì–ª–∞–∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫ —Å—Ñ–µ—Ä–µ');
                console.log('–î–µ—Ç–∏ —Å—Ñ–µ—Ä—ã:', sphereMesh.children.length);
                
                // –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                console.log('–†–∞–∑–º–µ—Ä –≥–ª–∞–∑:', this.eyeSize);
                console.log('–ü–æ–∑–∏—Ü–∏—è –ª–µ–≤–æ–≥–æ –≥–ª–∞–∑–∞:', this.leftEye.position);
                console.log('–ü–æ–∑–∏—Ü–∏—è –ø—Ä–∞–≤–æ–≥–æ –≥–ª–∞–∑–∞:', this.rightEye.position);
                console.log('–†–∞–¥–∏—É—Å —Å—Ñ–µ—Ä—ã:', radius);
                
                this.updateEmotion(this.currentEmotion);
                
                document.getElementById('eyes-status').textContent = '–î–∞ ‚úÖ';
                console.log('–ì–ª–∞–∑–∞ —Å–æ–∑–¥–∞–Ω—ã –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫ —Å—Ñ–µ—Ä–µ');
                return true;
            }
            
            updateEmotion(emotion) {
                if (!this.emotions[emotion]) {
                    console.warn(`–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —ç–º–æ—Ü–∏—è: ${emotion}`);
                    return;
                }
                
                this.currentEmotion = emotion;
                
                if (!this.leftEye || !this.rightEye) {
                    return;
                }
                
                const coords = this.emotions[emotion];
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UV –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
                const uvOffsetX = coords.u;
                const uvOffsetY = coords.v;
                const uvScaleX = 0.166; // 1/6 –¥–ª—è 6 —ç–º–æ—Ü–∏–π –≤ —Ä—è–¥
                const uvScaleY = 1.0; // –≤—Å—è –≤—ã—Å–æ—Ç–∞
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UV –¥–ª—è –ª–µ–≤–æ–≥–æ –≥–ª–∞–∑–∞
                if (this.leftEye.material.map) {
                    this.leftEye.material.map.offset.set(uvOffsetX, uvOffsetY);
                    this.leftEye.material.map.repeat.set(uvScaleX, uvScaleY);
                    this.leftEye.material.needsUpdate = true;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UV –¥–ª—è –ø—Ä–∞–≤–æ–≥–æ –≥–ª–∞–∑–∞
                if (this.rightEye.material.map) {
                    this.rightEye.material.map.offset.set(uvOffsetX, uvOffsetY);
                    this.rightEye.material.map.repeat.set(uvScaleX, uvScaleY);
                    this.rightEye.material.needsUpdate = true;
                }
                
                console.log(`–≠–º–æ—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞: ${emotion}`);
            }
            
            removeEyes() {
                if (this.leftEye && this.sphereMesh) {
                    this.sphereMesh.remove(this.leftEye);
                    this.leftEye.geometry.dispose();
                    this.leftEye.material.dispose();
                    this.leftEye = null;
                }
                
                if (this.rightEye && this.sphereMesh) {
                    this.sphereMesh.remove(this.rightEye);
                    this.rightEye.geometry.dispose();
                    this.rightEye.material.dispose();
                    this.rightEye = null;
                }
                
                document.getElementById('eyes-status').textContent = '–ù–µ—Ç';
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ü–µ–Ω—ã
        function init() {
            // –°–æ–∑–¥–∞–µ–º —Å—Ü–µ–Ω—É
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x111111);
            
            // –°–æ–∑–¥–∞–µ–º –∫–∞–º–µ—Ä—É
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 2, 5);
            
            // –°–æ–∑–¥–∞–µ–º —Ä–µ–Ω–¥–µ—Ä–µ—Ä
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            document.body.appendChild(renderer.domElement);
            
            // –°–æ–∑–¥–∞–µ–º –æ—Å–≤–µ—â–µ–Ω–∏–µ
            const ambientLight = new THREE.AmbientLight(0x404040, 0.6);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 10, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            // –°–æ–∑–¥–∞–µ–º —Å—Ñ–µ—Ä—É
            const geometry = new THREE.SphereGeometry(1, 32, 32);
            const material = new THREE.MeshPhongMaterial({ 
                color: 0x4444ff,
                shininess: 30
            });
            sphere = new THREE.Mesh(geometry, material);
            sphere.position.set(0, 0, 0);
            sphere.castShadow = true;
            sphere.receiveShadow = true;
            scene.add(sphere);
            
            // –°–æ–∑–¥–∞–µ–º –ø–æ–ª
            const floorGeometry = new THREE.PlaneGeometry(20, 20);
            const floorMaterial = new THREE.MeshPhongMaterial({ color: 0x333333 });
            const floor = new THREE.Mesh(floorGeometry, floorMaterial);
            floor.rotation.x = -Math.PI / 2;
            floor.position.y = -2;
            floor.receiveShadow = true;
            scene.add(floor);
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É –≥–ª–∞–∑
            eyeSystem = new EyeSystem();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
            window.addEventListener('resize', onWindowResize);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            animate();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—Å—Ç—É—Ä—É –∏ —Å–æ–∑–¥–∞–µ–º –≥–ª–∞–∑–∞
            loadAndCreateEyes();
        }
        
        async function loadAndCreateEyes() {
            await eyeSystem.loadTexture();
            eyeSystem.createEyes(sphere);
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            // –í—Ä–∞—â–∞–µ–º —Å—Ñ–µ—Ä—É –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–±–∑–æ—Ä–∞
            sphere.rotation.y += 0.005;
            
            // –ü–æ–∫–∞—á–∏–≤–∞–µ–º –∫–∞–º–µ—Ä—É
            camera.position.x = Math.sin(Date.now() * 0.001) * 2;
            camera.lookAt(sphere.position);
            
            renderer.render(scene, camera);
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        function setEmotion(emotion) {
            if (eyeSystem) {
                eyeSystem.updateEmotion(emotion);
            }
        }
        
        function recreateEyes() {
            if (eyeSystem && sphere) {
                eyeSystem.removeEyes();
                document.getElementById('eyes-status').textContent = '–ü–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è...';
                setTimeout(() => {
                    eyeSystem.createEyes(sphere);
                }, 100);
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
        init();
    </script>
</body>
</html> 